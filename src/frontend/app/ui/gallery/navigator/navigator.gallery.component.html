<div #navigator class="container-fluid pt-1 pb-1 pe-0 ps-0 bg-body-secondary">
  <nav class="d-md-flex row" aria-label="breadcrumb">
    <div class="col-12 col-md-auto">
      <ol *ngIf="isDirectory" id="directory-path" class="mb-0 mt-1 breadcrumb">
        <li *ngFor="let path of routes | async" class="breadcrumb-item">
          <a *ngIf="path.route" [routerLink]="['/gallery',path.route]"
             [title]="replaceUnderscore(path.title) || ''"
             [queryParams]="queryService.getParams()">{{replaceUnderscore(path.name)}}</a>
          <ng-container *ngIf="!path.route">{{replaceUnderscore(path.name)}}</ng-container>
        </li>
      </ol>

      <ol *ngIf="isSearch" class="mb-0 mt-1 breadcrumb">
        <li class="active">
          <ng-container i18n>Searching for:</ng-container>
          <strong> {{galleryService.content.value?.searchResult?.searchQuery | searchQuery}}</strong>
        </li>
      </ol>

    </div>
    <div class="ms-auto text-end col-12 col-md-auto">
      <ng-container *ngIf="ItemCount> 0 && config.Gallery.NavBar.showItemCount">
        <div class="photos-count">
          {{ItemCount}} <span i18n>items</span>
        </div>
        <div class="divider">&nbsp;</div>
      </ng-container>

      <ng-container *ngIf="config.Gallery.enableDownloadZip && isDirectory && ItemCount > 0">
        <a [href]="getDownloadZipLink()"
           class="btn  btn-outline-secondary btn-navigator">
          <ng-icon name="ionDownloadOutline" title="download" i18n-title></ng-icon>
        </a>
        <div class="divider">&nbsp;</div>
      </ng-container>

      <ng-container *ngIf="config.Gallery.enableDirectoryFlattening && isDirectory && authService.canSearch()">
        <a
          [routerLink]="['/search', getDirectoryFlattenSearchQuery()]"
          class="btn btn-outline-secondary btn-navigator">
          <ng-icon name="ionGitBranchOutline"
                   title="Show all subdirectories" i18n-title></ng-icon>
        </a>
        <div class="divider">&nbsp;</div>
      </ng-container>
      <ng-container *ngIf="ItemCount> 0">
        <a class="btn btn-outline-secondary btn-navigator"
           [class.btn-secondary]="filterService.activeFilters.value.areFiltersActive"
           [class.btn-outline-secondary]="!filterService.activeFilters.value.areFiltersActive"
           (click)="showFilters = ! showFilters">
          <ng-icon name="ionFunnelOutline"
                   title="Filters" i18n-title></ng-icon>
        </a>
        <div class="divider">&nbsp;</div>
      </ng-container>
      <div class="btn-group" dropdown #dropdown="bs-dropdown" placement="bottom right">
        <button id="button-alignment" dropdownToggle type="button"
                class="btn dropdown-toggle  btn-outline-secondary btn-navigator"
                [class.btn-secondary]="sortingService.sorting.value !== DefaultSorting"
                [class.btn-outline-secondary]="sortingService.sorting.value == DefaultSorting"
                aria-controls="sorting-dropdown">
          <app-sorting-method-icon [method]="sortingService.sorting.value"></app-sorting-method-icon>
        </button>
        <ul id="sorting-dropdown" *dropdownMenu class="dropdown-menu dropdown-menu-right"
            role="menu" aria-labelledby="button-alignment">
          <li class="row dropdown-item sorting-item" role="menuitem"
              *ngFor="let type of sortingMethodsType"
              (click)="setSorting(type.key)">
            <div class="col-3">
              <app-sorting-method-icon [method]="type.key"></app-sorting-method-icon>
            </div>
            <div class="col-9">{{type.key | stringifySorting}}</div>
          </li>
        </ul>
      </div>
    </div>
  </nav>


</div>
<app-gallery-filter #filterComponent
                    *ngIf="showFilters && ItemCount> 0"
                    [style.max-height]="sanitizer.bypassSecurityTrustStyle('calc(100dvh - '+(navigatorElement?.nativeElement?.getBoundingClientRect().top+navigatorElement?.nativeElement?.getBoundingClientRect().height)+'px)')"

                    class="position-absolute w-100"></app-gallery-filter>
